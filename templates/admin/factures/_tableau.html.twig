{% if factures is empty %}
    <tr>
        <td colspan="10" style="padding:20px; text-align:center; color:#6c757d;">
            Aucune facture trouvée pour ces critères.
        </td>
    </tr>
{% else %}
    {% for facture in factures %}
    <tr style="border-bottom:1px solid #dee2e6;">
        <td style="padding:12px;">
            <strong>{{ facture.numero }}</strong>
        </td>
        <td style="padding:12px;">
            {{ facture.dateEmission|date('d/m/Y H:i') }}
        </td>
        <td style="padding:12px;">
            Colis #{{ facture.livraison.colis.id }}
        </td>
        <td style="padding:12px;">
            {{ facture.livraison.colis.destinataire.nom }}
            {{ facture.livraison.colis.destinataire.prenom }}
        </td>
        <td style="padding:12px;">
            {{ facture.livraison.livreur.nom }}
            {{ facture.livraison.livreur.prenom }}
        </td>
        <td style="padding:12px; text-align:right;">
            {{ facture.montantHT|number_format(2, '.', ' ') }} DT
        </td>
        <td style="padding:12px; text-align:right;">
            {{ facture.tva|number_format(2, '.', ' ') }} DT
        </td>
        <td style="padding:12px; text-align:right;">
            <strong>{{ facture.montantTTC|number_format(2, '.', ' ') }} DT</strong>
        </td>
        <td style="padding:12px; text-align:center;">
            <span style="padding:5px 10px; border-radius:5px; font-size:12px;
                background:{% if facture.statut == 'payee' %}#d1e7dd{% elseif facture.statut == 'emise' %}#fff3cd{% else %}#f8d7da{% endif %};
                color:{% if facture.statut == 'payee' %}#0f5132{% elseif facture.statut == 'emise' %}#664d03{% else %}#842029{% endif %};">
                {{ facture.statut|capitalize }}
            </span>
        </td>
        <td style="padding:12px; text-align:center;">
            <a href="{{ path('app_facture_show', {id: facture.id}) }}"
               style="padding:5px 10px; margin:2px; background:#0dcaf0; color:white; text-decoration:none; border-radius:3px; font-size:12px;">
                Modifier
            </a>
            <a href="{{ path('app_facture_pdf', {id: facture.id}) }}"
               style="padding:5px 10px; margin:2px; background:#dc3545; color:white; text-decoration:none; border-radius:3px; font-size:12px;">
                PDF
            </a>
            <form method="post"
                  action="{{ path('app_facture_delete', {id: facture.id}) }}"
                  style="display:inline;">
                <input type="hidden" name="_token"
                       value="{{ csrf_token('delete' ~ facture.id) }}">
                <button type="submit"
                        onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette facture ?')"
                        style="padding:5px 10px; margin:2px; background:#6c757d; color:white; border:none; border-radius:3px; cursor:pointer; font-size:12px;">
                    Supprimer
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
{% endif %}